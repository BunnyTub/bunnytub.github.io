	<!DOCTYPE HTML>
	<html lang="en">
		<head>
			<title>Info Board</title>
			<meta charset="UTF-8">
			<meta name="robots" content="noindex">
			<meta property="og:url" content="https://bunnytub.com/">
			<link rel="canonical" href="https://bunnytub.com/InfoBoard" />
			<link rel="preconnect" href="https://fonts.googleapis.com">
			<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
			<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
			<link rel="icon" href="/favicon.ico">
			<script src="WarnOfHTML.js"></script>
			<!-- Google tag (gtag.js) -->
			<script async src="https://www.googletagmanager.com/gtag/js?id=G-XRBM5V7X9T"></script>
			<script>
				window.dataLayer = window.dataLayer || [];
				function gtag(){dataLayer.push(arguments);}
				gtag('js', new Date());
				gtag('config', 'G-XRBM5V7X9T');
			</script>
			<style>
				html, body {
					margin: 0;
					padding: 0;
					height: 100%;
					color: white;
					background-color: black;
					/* background-color: #14192C; */
					font-family: "Montserrat", monospace;
					font-weight: 900;
					overflow: hidden;
					text-shadow: 0 0 12px #000000;
				}

				img {
					width: 100%;
					height: 100%;
					object-fit: cover;
					display: block;
					transition: all 0.5s ease-out;
					filter: opacity(1);
					transform: scale(1) rotate(0deg);
    				transform-origin: center center;
					will-change: filter, transform, opacity;
				}

				img.blurred {
					filter: opacity(0);
					transform: scale(0.75) rotate(-8deg);
					will-change: filter, transform, opacity;
				}

				#countdownBox {
					bottom: 32px;
					left: 36px;
					position: fixed;
					color: rgb(255, 255, 255);
					/* padding: 2px 12px; */
					border-radius: 16px;
					font-size: 24pt;
					z-index: 8000;
					animation: countdownBoxPulse 30s linear infinite alternate;
					opacity: 25%;
				}

				@keyframes countdownBoxPulse {
					from { color: rgba(0, 0, 0, 0.5); }
					to { color: rgba(255, 255, 0, 0.5); }
				}

				#openBox {
					position: fixed;
					background-color: rgba(0, 0, 0, 0.25);
					color: rgba(255, 0, 0);
					padding: 2px 12px;
					border-radius: 16px;
					font-size: 52pt;
					z-index: 8000;
					animation: openBoxPulse 8s linear infinite;
				}

				@keyframes openBoxPulse {
					0%   { filter: hue-rotate(0deg); }
    				100% { filter: hue-rotate(360deg); }
				}

				#closingSoonBox {
					position: fixed;
					background-color: rgba(255, 255, 0, 0.25);
					color: rgba(255, 255, 0);
					padding: 2px 12px;
					border-radius: 16px;
					font-size: 58pt;
					z-index: 8005;
					animation: closingSoonBoxPulse 1s infinite alternate;
				}

				@keyframes closingSoonBoxPulse {
					from { color: rgba(0, 0, 0, 0.5); }
					to { color: rgba(255, 255, 0, 1); }
				}

				.invisible {
    				visibility: hidden;
				}

				#coverBox {
					position: fixed;
					top: 0px;
					width: 100vw;
					height: 100vh;
					background-color: rgb(48, 0, 0);
					display: flex;
					justify-content: center;
					align-items: center;
					border-radius: 0;
					z-index: 9000;
				}

				#closedBox {
					position: fixed;
					top: 50%;
					left: 50%;
					transform: translate(-50%, -50%);
					background-color: rgba(128, 0, 0);
					color: rgba(255, 0, 0);
					padding: 55px 65px;
					border-radius: 24px;
					font-size: 160pt;
					z-index: 9005;
					animation: closedBoxPulse 4s infinite alternate-reverse ease-out;
				}

				@keyframes closedBoxPulse {
					from { color: rgba(255, 0, 0); background-color: rgba(128, 0, 0, 0.7) }
					to { color: rgba(100, 0, 0); background-color: rgba(0, 0, 0, 0) }
				}
			</style>
		</head>
		<body>
			<img id="slideshow" src="media/wait.png"></img>
			<div id="openBox" class="invisible">OPEN</div>
			<div id="closingSoonBox" class="invisible">CLOSING SOON</div>
			<div id="coverBox" class="invisible"><div id="closedBox">CLOSED</div></div>
			<div id="countdownBox" class="invisible"></div>
			
			<script>
				const slideshow = document.getElementById("slideshow");
				const defaultImage = "media/wait.png";
				const totalSlides = 6;
				const slideDuration = 15000;
				var lastIndex = 0;

				function updateSlide() {
					const now = Date.now();

					const slideIndex = Math.floor((now / slideDuration) % totalSlides) + 1;
					if (lastIndex === slideIndex) return;
					lastIndex = slideIndex;

					const img = new Image();
					img.src = `slideshow/slide${slideIndex}.png?querydate=${now}`;

					img.onload = () => {
						slideshow.classList.add("blurred");
						setTimeout(() => {
							slideshow.src = img.src;
							setTimeout(() => {
								slideshow.classList.remove("blurred");
							}, 500);
						}, 1000);
					};

					img.onerror = () => {
						slideshow.src = defaultImage;
					};
				}

				/*
				setInterval(() => {
					setTimeout(() => {
						window.location.reload();
					}, 500);
					window.location.reload(true); // we love firefox https://developer.mozilla.org/en-US/docs/Web/API/Location/reload
				}, 7200000); // 30min = 1800000 | 120min = 7200000
				*/

				// use the refresh file to refresh

				let last = null;

				async function watchForRefreshFile() {
					const res = await fetch("refresh.txt?querydate=" + Date.now()); // do anything in this file to refresh everything
					const text = await res.text();

					if (last !== null && last !== text) {
						setTimeout(() => {
							window.location.reload();
						}, 500);
						window.location.reload(true);
					}
					last = text;

					setTimeout(watchForRefreshFile, 2000);
				}

				watchForRefreshFile();

				const openBox = document.getElementById("openBox");
				const closingSoonBox = document.getElementById("closingSoonBox");
				const coverBox = document.getElementById("coverBox");

				const boxes = [
					document.getElementById("openBox"),
					document.getElementById("closingSoonBox")
				];

				let toggle = true;

				function swapPositions() {
					if (toggle) {
						boxes[0].style.top = '16px';
						boxes[0].style.left = '16px';
						boxes[0].style.bottom = '';
						boxes[0].style.right = '';

						boxes[1].style.bottom = '16px';
						boxes[1].style.right = '16px';
						boxes[1].style.top = '';
						boxes[1].style.left = '';
					} else {
						boxes[0].style.bottom = '16px';
						boxes[0].style.right = '16px';
						boxes[0].style.top = '';
						boxes[0].style.left = '';

						boxes[1].style.top = '16px';
						boxes[1].style.left = '16px';
						boxes[1].style.bottom = '';
						boxes[1].style.right = '';
					}

					toggle = !toggle;
				}

				swapPositions();

				setInterval(swapPositions, 10000);

				const dayMap = {
					Sunday: 0,
					Monday: 1,
					Tuesday: 2,
					Wednesday: 3,
					Thursday: 4,
					Friday: 5,
					Saturday: 6
				};

				var scheduleText = "";

				async function updateStatus() {
					try {
						const response = await fetch("schedule.txt?querydate=" + Date.now()); // in the future, I want to use the URL to get the filename to pull the schedule from, something like ?schedule=schedule1.txt
						scheduleText = await response.text();
					} catch (err) {
						console.error('Schedule error: ', err);
					}
				}

				var scheduleLastEvent = "";

				async function checkStatus() {
					try {
						// const text = `
						// Monday10:00-19:30
						// Tuesday10:00-21:00
						// Wednesday10:00-21:00
						// Thursday10:00-21:00
						// Friday10:00-21:00
						// Saturday10:00-21:00
						// Sunday10:00-17:00
						// `;
						const lines = scheduleText.split('\n');
						
						const now = new Date();
						const today = now.getDay();
						const currentTime = now.getHours() + now.getMinutes() / 60;
						
						openBox.classList.add('invisible');
						closingSoonBox.classList.add('invisible');
						coverBox.classList.add('invisible');

						let foundToday = false;
						let playChangeSound = true;

						for (const line of lines) {
							console.log("Processing line:", line);

							const match = line.match(/^([A-Za-z]+)(\d{1,2}):(\d{2})-(\d{1,2}):(\d{2})$/);
							if (!match) {
								console.log("Line did not match format, skipping.");
								continue;
							}

							const [_, dayName, startH, startM, endH, endM] = match;
							console.log(`Parsed: dayName=${dayName}, start=${startH}:${startM}, end=${endH}:${endM}`);

							if (dayMap[dayName] !== today) {
								console.log(`Not today's schedule (today=${today}, lineDay=${dayMap[dayName]}), skipping.`);
								continue;
							}

							foundToday = true;
							const startTime = parseInt(startH) + parseInt(startM) / 60;
							const endTime = parseInt(endH) + parseInt(endM) / 60;

							const closingWarningHours = 1;

							var scheduleBeforeLastEvent = scheduleLastEvent;

							if (currentTime >= startTime && currentTime <= endTime - closingWarningHours) {
								console.log("We're OPEN for business.");
								openBox.classList.remove('invisible');
								scheduleLastEvent = "open";
							} else if (currentTime > endTime - closingWarningHours && currentTime <= endTime) {
								console.log("We're OPEN for business but CLOSING SOON.");
								openBox.classList.remove('invisible');
								closingSoonBox.classList.remove('invisible');
								scheduleLastEvent = "closingsoon";
							} else {
								console.log("We're CLOSED and not open for business.");
								coverBox.classList.remove('invisible');
								scheduleLastEvent = "closed";
							}

							if (scheduleBeforeLastEvent === scheduleLastEvent) {
								playChangeSound = false;
							}

							break;
						}

						if (!foundToday) {
							console.log("We're in limbo. Schrodinger's open sign.");
							//coverBox.classList.remove('invisible');
							playChangeSound = false;
						}

						if (playChangeSound) {
							const audio = new Audio(`media/info-${scheduleLastEvent}.wav`);
							audio.play();
						}
					} catch (err) {
						console.error('Schedule error: ', err);
					}
				}

				function updateCountdown() {
					const target = new Date("2026-01-25");
					const now = new Date();
					const diff = target - now;
					const days = Math.floor(diff / (1000 * 60 * 60 * 24));
					document.getElementById("countdownBox").textContent =
						days + " day(s) remain";
				}

				setTimeout(() => {
					updateSlide();
					setInterval(updateSlide, 500);

					updateStatus();
					setInterval(updateStatus, 5000);

					checkStatus();
					setInterval(checkStatus, 5000);

					updateCountdown();
					setInterval(updateCountdown, 60 * 60 * 1000);

					const audio = new Audio('media/started.wav');
					audio.play();
				}, 1500); // I like my intro lol, intentional delay because bite me
			</script>

			<!-- <script>
				const urlParams = new URLSearchParams(window.location.search);

				if (urlParams.get('icecast') === '1') {
				}
			</script> -->
			<!-- <script>
				var slideshow = document.getElementById("slideshow");
				var slidenumber = 1;
				var defaultImage = "media/wait.png";

				function updateSlide() {
					var img = new Image();
					img.src = `slideshow/slide${slidenumber}.png?querydate=${Date.now()}`;

					img.onload = () => {
						slideshow.classList.add("blurred");
						setTimeout(() => {
							slideshow.src = img.src;
							slideshow.classList.remove("blurred");
						}, 1000);
						slidenumber++;
					};

					img.onerror = () => {
						//img.src = `slideshow/slide${slidenumber}.png?querydate=${Date.now()}`;
						slidenumber++;
						if (slidenumber > 10) slidenumber = 1;
						
						setTimeout(updateSlide, 10);
					};
				}

				setInterval(updateSlide, 5000);
				setTimeout(updateSlide, 2500);
				
				setInterval(() => {
					window.location.reload(true); // we love firefox https://developer.mozilla.org/en-US/docs/Web/API/Location/reload
					setTimeout(() => {
						window.location.reload();
					}, 1000);
				}, 1800000);
			</script> -->
		</body>
	</html>